<?xml version="1.0" encoding="UTF-8"?>
<sys_script_client action="INSERT_OR_UPDATE" active="true" applies_to="all" description="Validate age from birthdate" field="u_birthdate" name="Validate Age from Birthdate" sys_class_name="sys_script_client" sys_id="cs_validate_age" sys_package="x_1603889_paycheng" sys_scope="x_1603889_paycheng" sys_update_name="sys_script_client_CS_ValidateAge" table="x_1603889_paycheng_loan_application" type="onChange" ui_type="0">
    <active>true</active>
    <applies_extended>false</applies_extended>
    <applies_to>all</applies_to>
    <condition/>
    <description>Validate age from birthdate</description>
    <field>u_birthdate</field>
    <name>Validate Age from Birthdate</name>
    <order>300</order>
    <script><![CDATA[function onChange(control, oldValue, newValue, isLoading) {
    if (isLoading || newValue == '') {
        return;
    }
    
    var birthdate = new GlideDate();
    birthdate.setValue(newValue);
    
    var today = new GlideDate();
    var age = today.getYear() - birthdate.getYear();
    
    if (age < 21) {
        g_form.showFieldMsg('u_birthdate', 'Applicant must be at least 21 years old', 'error');
        g_form.setValue('u_birthdate', '');
    } else if (age > 65) {
        g_form.showFieldMsg('u_birthdate', 'Applicant must be 65 years old or younger', 'error');
        g_form.setValue('u_birthdate', '');
    }
}]]></script>
    <sys_class_name>sys_script_client</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2025-11-16 15:00:00</sys_created_on>
    <sys_id>cs_validate_age</sys_id>
    <sys_mod_count>0</sys_mod_count>
    <sys_name>Validate Age from Birthdate</sys_name>
    <sys_package display_value="Paycheng" source="x_1603889_paycheng">x_1603889_paycheng</sys_package>
    <sys_policy/>
    <sys_scope display_value="Paycheng" source="x_1603889_paycheng">x_1603889_paycheng</sys_scope>
    <sys_update_name>sys_script_client_CS_ValidateAge</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2025-11-16 15:00:00</sys_updated_on>
    <table>x_1603889_paycheng_loan_application</table>
    <type>onChange</type>
    <ui_type>0</ui_type>
    <view/>
</sys_script_client>

