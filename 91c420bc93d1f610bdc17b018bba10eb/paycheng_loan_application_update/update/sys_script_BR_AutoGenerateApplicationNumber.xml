<?xml version="1.0" encoding="UTF-8"?>
<sys_script action="INSERT_OR_UPDATE" active="true" name="Auto-Generate Application Number" order="100" sys_class_name="sys_script" sys_id="br_auto_gen_app_number" sys_package="x_1603889_paycheng" sys_scope="x_1603889_paycheng" sys_update_name="sys_script_BR_AutoGenerateApplicationNumber" when="before">
    <abort_action>false</abort_action>
    <action>insert</action>
    <api_name>Auto-Generate Application Number</api_name>
    <caller_access/>
    <client_callable>false</client_callable>
    <collection>x_1603889_paycheng_loan_application</collection>
    <condition/>
    <description>Auto-generate unique application number on insert</description>
    <execute_function/>
    <filter_condition/>
    <is_rest>false</is_rest>
    <ns><![CDATA[global]]></ns>
    <result><![CDATA[(function executeRule(current, previous /*null when async*/) {
    // Generate unique application number
    var prefix = 'LOAN';
    var timestamp = new GlideDateTime().getNumericValue();
    var random = Math.floor(Math.random() * 1000);
    
    current.number = prefix + timestamp + random;
    
})(current, previous);]]></result>
    <script><![CDATA[(function executeRule(current, previous /*null when async*/) {
    // Generate unique application number
    var prefix = 'LOAN';
    var timestamp = new GlideDateTime().getNumericValue();
    var random = Math.floor(Math.random() * 1000);
    
    current.number = prefix + timestamp + random;
    
})(current, previous);]]></script>
    <sys_class_name>sys_script</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2025-11-16 15:00:00</sys_created_on>
    <sys_id>br_auto_gen_app_number</sys_id>
    <sys_mod_count>0</sys_mod_count>
    <sys_name>Auto-Generate Application Number</sys_name>
    <sys_package display_value="Paycheng" source="x_1603889_paycheng">x_1603889_paycheng</sys_package>
    <sys_policy/>
    <sys_scope display_value="Paycheng" source="x_1603889_paycheng">x_1603889_paycheng</sys_scope>
    <sys_update_name>sys_script_BR_AutoGenerateApplicationNumber</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2025-11-16 15:00:00</sys_updated_on>
    <template/>
    <when>before</when>
</sys_script>

